<!DOCTYPE html>
<html>
<head>
	<title>
		
	</title>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
</head>
<body>
           {%include 'navbaritems.html'%}
<div class="row">
  <!-- size 4 on a large screen, 12 on a small, 6 on a med -->
    <div class="col l4 s12 m6">
<canvas id="myChart" width="10" height="3"></canvas>
</div>
</div>

<script type="text/javascript">

const mdata  = new Array();
const mytime = new Array();

getData();
 async function ChartGet(){

    const ctx = document.getElementById("myChart").getContext('2d');
    const myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels:mytime,
            datasets: [{
                label: 'MSFT Closing price',
                data: mdata,
                backgroundColor: '#cc65fe',
                borderColor: '#808000',
                fill: false ,
                stacked: true

            }]

        },

   

    });
}


function getData(){
    
const jsonUrl = "https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=MSFT&outputsize=compact&apikey=C5WDU2PJTHJ9KBHK";
const request = new XMLHttpRequest();


request.open("GET", jsonUrl);
request.send();

request.addEventListener("load", async function() {
    
const response =  await JSON.parse(request.responseText);

for (var i = 0; i < 100; i++){ 
  const time = Object.keys(response['Time Series (Daily)'])[i]
  const price = parseFloat(response['Time Series (Daily)'][time]['4. close'])
  console.log(response['Meta Data']['2. Symbol'])
mdata.push(price);
mytime.push(time) ;
window.mytime = mytime.sort();
//var  = mytime.reverse();
window.mdata = mdata.reverse();
//console.log(mdata)
;
}
await ChartGet()
})};
 



</script>

<script type="text/javascript">
    

//clearTimeout(5000);
   


//setTimout(datapi,5000)
</script>
           {%include 'footer.html'%}

</body>

</html>